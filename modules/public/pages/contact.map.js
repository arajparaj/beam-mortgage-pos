{"version":3,"file":"contact.min.js","sources":["webpack:///client/pages/contact/index.jsx","webpack:///?d41d*","webpack:///client/components/alert.jsx?3c20*","webpack:///client/pages/contact/form.jsx","webpack:///client/pages/contact/actions.js","webpack:///client/pages/contact/constants.js","webpack:///client/pages/contact/store.js","webpack:///client/components/form/textarea-control.jsx"],"sourcesContent":["/* global window */\n'use strict';\nconst Form = require('./form.jsx');\nconst React = require('react');\nconst ReactDOM = require('react-dom');\n\n\nclass Page {\n    static blastoff() {\n\n        this.mainElement = ReactDOM.render(\n            <Form />,\n            window.document.getElementById('app-mount')\n        );\n    }\n}\n\n\nmodule.exports = Page;\n\n\n/* $lab:coverage:off$ */\nif (!module.parent) {\n    window.page = Page;\n    Page.blastoff();\n}\n/* $lab:coverage:on$ */\n\n\n\n/** WEBPACK FOOTER **\n ** client/pages/contact/index.jsx\n **/","undefined\n\n\n/** WEBPACK FOOTER **\n ** \n **/","'use strict';\nconst React = require('react');\n\n\nconst propTypes = {\n    type: React.PropTypes.oneOf(['success', 'info', 'warning', 'danger']),\n    onClose: React.PropTypes.func,\n    message: React.PropTypes.string\n};\n\n\nclass Alert extends React.Component {\n    render() {\n\n        let close;\n\n        if (this.props.onClose) {\n            close = <button\n                type=\"button\"\n                className=\"close\"\n                onClick={this.props.onClose}>\n\n                &times;\n            </button>;\n        }\n\n        return (\n            <div className={`alert alert-${this.props.type}`}>\n                {close}\n                {this.props.message}\n            </div>\n        );\n    }\n}\n\nAlert.propTypes = propTypes;\n\n\nmodule.exports = Alert;\n\n\n\n/** WEBPACK FOOTER **\n ** client/components/alert.jsx\n **/","'use strict';\nconst Actions = require('./actions');\nconst Alert = require('../../components/alert.jsx');\nconst Button = require('../../components/form/button.jsx');\nconst ControlGroup = require('../../components/form/control-group.jsx');\nconst React = require('react');\nconst Spinner = require('../../components/form/spinner.jsx');\nconst Store = require('./store');\nconst TextControl = require('../../components/form/text-control.jsx');\nconst TextareaControl = require('../../components/form/textarea-control.jsx');\n\n\nclass Form extends React.Component {\n    constructor(props) {\n\n        super(props);\n\n        this.input = {};\n        this.state = Store.getState();\n    }\n\n    componentDidMount() {\n\n        this.unsubscribeStore = Store.subscribe(this.onStoreChange.bind(this));\n\n        if (this.input.name) {\n            this.input.name.focus();\n        }\n    }\n\n    componentWillUnmount() {\n\n        this.unsubscribeStore();\n    }\n\n    onStoreChange() {\n\n        this.setState(Store.getState());\n    }\n\n    handleSubmit(event) {\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        Actions.sendMessage({\n            name: this.input.name.value(),\n            email: this.input.email.value(),\n            message: this.input.message.value()\n        });\n    }\n\n    render() {\n\n        let alert = [];\n\n        if (this.state.success) {\n            alert = <Alert\n                type=\"success\"\n                message=\"Success. We have received your message.\"\n            />;\n        }\n        else if (this.state.error) {\n            alert = <Alert\n                type=\"danger\"\n                message={this.state.error}\n            />;\n        }\n\n        let formElements;\n\n        if (!this.state.success) {\n            formElements = <fieldset>\n                <TextControl\n                    ref={(c) => (this.input.name = c)}\n                    name=\"name\"\n                    label=\"Your name\"\n                    hasError={this.state.hasError.name}\n                    help={this.state.help.name}\n                    disabled={this.state.loading}\n                />\n                <TextControl\n                    ref={(c) => (this.input.email = c)}\n                    name=\"email\"\n                    label=\"Your email\"\n                    hasError={this.state.hasError.email}\n                    help={this.state.help.email}\n                    disabled={this.state.loading}\n                />\n                <TextareaControl\n                    ref={(c) => (this.input.message = c)}\n                    name=\"message\"\n                    label=\"Message\"\n                    rows=\"5\"\n                    hasError={this.state.hasError.message}\n                    help={this.state.help.message}\n                    disabled={this.state.loading}\n                />\n                <ControlGroup hideLabel={true} hideHelp={true}>\n                    <Button\n                        type=\"submit\"\n                        inputClasses={{ 'btn-primary': true }}\n                        disabled={this.state.loading}>\n\n                        Send message\n                        <Spinner space=\"left\" show={this.state.loading} />\n                    </Button>\n                </ControlGroup>\n            </fieldset>;\n        }\n\n        return (\n            <section>\n                <h1 className=\"page-header\">Send a message</h1>\n                <form onSubmit={this.handleSubmit.bind(this)}>\n                    {alert}\n                    {formElements}\n                </form>\n            </section>\n        );\n    }\n}\n\n\nmodule.exports = Form;\n\n\n\n/** WEBPACK FOOTER **\n ** client/pages/contact/form.jsx\n **/","'use strict';\nconst ApiActions = require('../../actions/api');\nconst Constants = require('./constants');\nconst Store = require('./store');\n\n\nclass Actions {\n    static sendMessage(data) {\n\n        ApiActions.post(\n            '/api/contact',\n            data,\n            Store,\n            Constants.SEND_MESSAGE,\n            Constants.SEND_MESSAGE_RESPONSE\n        );\n    }\n}\n\n\nmodule.exports = Actions;\n\n\n\n/** WEBPACK FOOTER **\n ** client/pages/contact/actions.js\n **/","'use strict';\nconst FluxConstant = require('flux-constant');\n\n\nmodule.exports = FluxConstant.set([\n    'SEND_MESSAGE',\n    'SEND_MESSAGE_RESPONSE'\n]);\n\n\n\n/** WEBPACK FOOTER **\n ** client/pages/contact/constants.js\n **/","'use strict';\nconst Constants = require('./constants');\nconst ObjectAssign = require('object-assign');\nconst ParseValidation = require('../../helpers/parse-validation');\nconst Redux = require('redux');\n\n\nconst initialState = {\n    loading: false,\n    success: false,\n    error: undefined,\n    hasError: {},\n    help: {}\n};\nconst reducer = function (state, action) {\n\n    if (action.type === Constants.SEND_MESSAGE) {\n        return ObjectAssign({}, state, {\n            loading: true\n        });\n    }\n\n    if (action.type === Constants.SEND_MESSAGE_RESPONSE) {\n        const validation = ParseValidation(action.response);\n\n        return ObjectAssign({}, state, {\n            loading: false,\n            success: !action.err,\n            error: validation.error,\n            hasError: validation.hasError,\n            help: validation.help\n        });\n    }\n\n    return state;\n};\n\n\nmodule.exports = Redux.createStore(reducer, initialState);\n\n\n\n/** WEBPACK FOOTER **\n ** client/pages/contact/store.js\n **/","'use strict';\nconst ClassNames = require('classnames');\nconst ControlGroup = require('./control-group.jsx');\nconst ObjectAssign = require('object-assign');\nconst React = require('react');\n\n\nconst propTypes = {\n    disabled: React.PropTypes.bool,\n    hasError: React.PropTypes.bool,\n    help: React.PropTypes.string,\n    inputClasses: React.PropTypes.object,\n    label: React.PropTypes.string,\n    name: React.PropTypes.string,\n    onChange: React.PropTypes.func,\n    placeholder: React.PropTypes.string,\n    rows: React.PropTypes.string,\n    value: React.PropTypes.string\n};\n\n\nclass TextareaControl extends React.Component {\n    focus() {\n\n        return this.input.focus();\n    }\n\n    value() {\n\n        return this.input.value;\n    }\n\n    render() {\n\n        const inputClasses = ClassNames(ObjectAssign({\n            'form-control': true\n        }, this.props.inputClasses));\n\n        return (\n            <ControlGroup\n                hasError={this.props.hasError}\n                label={this.props.label}\n                help={this.props.help}>\n\n                <textarea\n                    ref={(c) => (this.input = c)}\n                    className={inputClasses}\n                    name={this.props.name}\n                    rows={this.props.rows}\n                    placeholder={this.props.placeholder}\n                    value={this.props.value}\n                    disabled={this.props.disabled ? 'disabled' : undefined}\n                    onChange={this.props.onChange}\n                />\n            </ControlGroup>\n        );\n    }\n}\n\nTextareaControl.propTypes = propTypes;\n\n\nmodule.exports = TextareaControl;\n\n\n\n/** WEBPACK FOOTER **\n ** client/components/form/textarea-control.jsx\n **/"],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAAA;ACCA;AACA;AACA;AAEA;;;;;;;AACA;AACA;AACA;AAIA;;;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;ACzBA;AACA;;;;;;;;;AAAA;AACA;ADEA;AACA;AACA;AACA;AAHA;AACA;AAMA;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAKA;;;;AArBA;AACA;AAuBA;AACA;AAEA;;;;;;;AEtCA;AACA;;;;;;;;;AAAA;AFCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA;AAAA;AACA;AADA;AACA;AAGA;AACA;AALA;AAMA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAMA;AANA;AADA;AA1BA;AAqCA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAFA;AAQA;;;;AA5GA;AACA;AA+GA;;;;;;;AG5HA;AACA;;;;;AAAA;AHCA;AACA;AACA;AAEA;;;;;;;AACA;AACA;AACA;AAOA;;;;;;AAIA;;;;;;;AIpBA;AACA;AAAA;AACA;AJEA;;;;;;;AKJA;AACA;AAAA;ALCA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AAEA;;;;;;;AMtCA;AACA;;;;;;;;;AAAA;ANCA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAaA;;;;;;;;;;;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AALA;AAiBA;;;;AAnCA;AACA;AAqCA;AACA;AAEA;;;;","sourceRoot":""}